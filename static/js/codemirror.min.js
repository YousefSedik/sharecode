!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).CodeMirror = t() }(this, function () { "use strict"; var e = navigator.userAgent, l = navigator.platform, d = /gecko\/\d/i.test(e), s = /MSIE \d/.test(e), a = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e), u = /Edge\/(\d+)/.exec(e), w = s || a || u, v = w && (s ? document.documentMode || 6 : +(u || a)[1]), x = !u && /WebKit\//.test(e), s = x && /Qt\/\d+\.\d+/.test(e), m = !u && /Chrome\/(\d+)/.exec(e), V = m && +m[1], K = /Opera\//.test(e), j = /Apple Computer/.test(navigator.vendor), c = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e), X = /PhantomJS/.test(e), Y = j && (/Mobile\/\w+/.test(e) || 2 < navigator.maxTouchPoints), $ = /Android/.test(e), _ = Y || $ || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e), C = Y || /Mac/.test(l), q = /\bCrOS\b/.test(e), a = /win/i.test(l), u = K && e.match(/Version\/(\d*\.\d*)/), Z = ((u = u && Number(u[1])) && 15 <= u && (x = !(K = !1)), C && (s || K && (null == u || u < 12.11))), Q = d || w && 9 <= v; function J(e) { return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*") } var ee = function (e, t) { var n, r = e.className, t = J(t).exec(r); t && (n = r.slice(t.index + t[0].length), e.className = r.slice(0, t.index) + (n ? t[1] + n : "")) }; function te(e) { for (var t = e.childNodes.length; 0 < t; --t)e.removeChild(e.firstChild); return e } function y(e, t) { return te(e).appendChild(t) } function M(e, t, n, r) { var i = document.createElement(e); if (n && (i.className = n), r && (i.style.cssText = r), "string" == typeof t) i.appendChild(document.createTextNode(t)); else if (t) for (var o = 0; o < t.length; ++o)i.appendChild(t[o]); return i } function ne(e, t, n, r) { e = M(e, t, n, r); return e.setAttribute("role", "presentation"), e } function re(e, t) { if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t); do { if ((t = 11 == t.nodeType ? t.host : t) == e) return !0 } while (t = t.parentNode) } function N() { var t; try { t = document.activeElement } catch (e) { t = document.body || null } for (; t && t.shadowRoot && t.shadowRoot.activeElement;)t = t.shadowRoot.activeElement; return t } function ie(e, t) { var n = e.className; J(t).test(n) || (e.className += (n ? " " : "") + t) } function oe(e, t) { for (var n = e.split(" "), r = 0; r < n.length; r++)n[r] && !J(n[r]).test(t) && (t += " " + n[r]); return t } var le = document.createRange ? function (e, t, n, r) { var i = document.createRange(); return i.setEnd(r || e, n), i.setStart(e, t), i } : function (e, t, n) { var r = document.body.createTextRange(); try { r.moveToElementText(e.parentNode) } catch (e) { return r } return r.collapse(!0), r.moveEnd("character", n), r.moveStart("character", t), r }, se = function (e) { e.select() }; function ae(e) { var t = Array.prototype.slice.call(arguments, 1); return function () { return e.apply(null, t) } } function ue(e, t, n) { for (var r in t = t || {}, e) !e.hasOwnProperty(r) || !1 === n && t.hasOwnProperty(r) || (t[r] = e[r]); return t } function S(e, t, n, r, i) { null == t && -1 == (t = e.search(/[^\s\u00a0]/)) && (t = e.length); for (var o = r || 0, l = i || 0; ;) { var s = e.indexOf("\t", o); if (s < 0 || t <= s) return l + (t - o); l = (l += s - o) + (n - l % n), o = s + 1 } } Y ? se = function (e) { e.selectionStart = 0, e.selectionEnd = e.value.length } : w && (se = function (e) { try { e.select() } catch (e) { } }); function ce() { this.id = null, this.f = null, this.time = 0, this.handler = ae(this.onTimeout, this) } function L(e, t) { for (var n = 0; n < e.length; ++n)if (e[n] == t) return n; return -1 } ce.prototype.onTimeout = function (e) { e.id = 0, e.time <= +new Date ? e.f() : setTimeout(e.handler, e.time - +new Date) }; var he = 50, de = { toString: function () { return "CodeMirror.Pass" } }, fe = { scroll: !(ce.prototype.set = function (e, t) { this.f = t; t = +new Date + e; (!this.id || t < this.time) && (clearTimeout(this.id), this.id = setTimeout(this.handler, e), this.time = t) }) }, pe = { origin: "*mouse" }, ge = { origin: "+move" }; function me(e, t, n) { for (var r = 0, i = 0; ;) { var o = e.indexOf("\t", r), l = (o = -1 == o ? e.length : o) - r; if (o == e.length || t <= i + l) return r + Math.min(l, t - i); if (i += o - r, r = o + 1, t <= (i += n - i % n)) return r } } var ve = [""]; function ye(e) { for (; ve.length <= e;)ve.push(z(ve) + " "); return ve[e] } function z(e) { return e[e.length - 1] } function be(e, t) { for (var n = [], r = 0; r < e.length; r++)n[r] = t(e[r], r); return n } function we() { } function xe(e, t) { e = Object.create ? Object.create(e) : (we.prototype = e, new we); return t && ue(t, e), e } var Ce = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/; function Se(e) { return /\w/.test(e) || "Â€" < e && (e.toUpperCase() != e.toLowerCase() || Ce.test(e)) } function Le(e, t) { return t ? !!(-1 < t.source.indexOf("\\w") && Se(e)) || t.test(e) : Se(e) } function ke(e) { for (var t in e) if (e.hasOwnProperty(t) && e[t]) return; return 1 } var Te = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/; function Me(e) { return 768 <= e.charCodeAt(0) && Te.test(e) } function Ne(e, t, n) { for (; (n < 0 ? 0 < t : t < e.length) && Me(e.charAt(t));)t += n; return t } function Oe(e, t, n) { for (var r = n < t ? -1 : 1; ;) { if (t == n) return t; var i = (t + n) / 2, i = r < 0 ? Math.ceil(i) : Math.floor(i); if (i == t) return e(i) ? t : n; e(i) ? n = i : t = i + r } } var Ae = null; function De(e, t, n) { var r; Ae = null; for (var i = 0; i < e.length; ++i) { var o = e[i]; if (o.from < t && o.to > t) return i; o.to == t && (o.from != o.to && "before" == n ? r = i : Ae = i), o.from == t && (o.from != o.to && "before" != n ? r = i : Ae = i) } return null != r ? r : Ae } We = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, He = /[stwN]/, Fe = /[LRr]/, Ee = /[Lb1n]/, Pe = /[1n]/; var We, He, Fe, Ee, Pe, Ie = function (e, t) { var n = "ltr" == t ? "L" : "R"; if (0 == e.length || "ltr" == t && !We.test(e)) return !1; for (var r, i = e.length, o = [], l = 0; l < i; ++l)o.push((r = e.charCodeAt(l)) <= 247 ? "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(r) : 1424 <= r && r <= 1524 ? "R" : 1536 <= r && r <= 1785 ? "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(r - 1536) : 1774 <= r && r <= 2220 ? "r" : 8192 <= r && r <= 8203 ? "w" : 8204 == r ? "b" : "L"); for (var s = 0, a = n; s < i; ++s) { var u = o[s]; "m" == u ? o[s] = a : a = u } for (var c = 0, h = n; c < i; ++c) { var d = o[c]; "1" == d && "r" == h ? o[c] = "n" : Fe.test(d) && "r" == (h = d) && (o[c] = "R") } for (var f = 1, p = o[0]; f < i - 1; ++f) { var g = o[f]; "+" == g && "1" == p && "1" == o[f + 1] ? o[f] = "1" : "," != g || p != o[f + 1] || "1" != p && "n" != p || (o[f] = p), p = g } for (var m = 0; m < i; ++m) { var v = o[m]; if ("," == v) o[m] = "N"; else if ("%" == v) { for (var y = void 0, y = m + 1; y < i && "%" == o[y]; ++y); for (var b = m && "!" == o[m - 1] || y < i && "1" == o[y] ? "1" : "N", w = m; w < y; ++w)o[w] = b; m = y - 1 } } for (var x = 0, C = n; x < i; ++x) { var S = o[x]; "L" == C && "1" == S ? o[x] = "L" : Fe.test(S) && (C = S) } for (var L = 0; L < i; ++L)if (He.test(o[L])) { for (var k = void 0, k = L + 1; k < i && He.test(o[k]); ++k); for (var T = "L" == (L ? o[L - 1] : n), M = T == ("L" == (k < i ? o[k] : n)) ? T ? "L" : "R" : n, N = L; N < k; ++N)o[N] = M; L = k - 1 } for (var O, A = [], D = 0; D < i;)if (Ee.test(o[D])) { var P = D; for (++D; D < i && Ee.test(o[D]); ++D); A.push(new ze(0, P, D)) } else { var W = D, H = A.length, F = "rtl" == t ? 1 : 0; for (++D; D < i && "L" != o[D]; ++D); for (var E = W; E < D;)if (Pe.test(o[E])) { W < E && (A.splice(H, 0, new ze(1, W, E)), H += F); var I = E; for (++E; E < D && Pe.test(o[E]); ++E); A.splice(H, 0, new ze(2, I, E)), H += F, W = E } else ++E; W < D && A.splice(H, 0, new ze(1, W, D)) } return "ltr" == t && (1 == A[0].level && (O = e.match(/^\s+/)) && (A[0].from = O[0].length, A.unshift(new ze(0, 0, O[0].length))), 1 == z(A).level && (O = e.match(/\s+$/)) && (z(A).to -= O[0].length, A.push(new ze(0, i - O[0].length, i)))), "rtl" == t ? A.reverse() : A }; function ze(e, t, n) { this.level = e, this.from = t, this.to = n } function Re(e, t) { var n = e.order; return n = null == n ? e.order = Ie(e.text, t) : n } var Be = [], k = function (e, t, n) { e.addEventListener ? e.addEventListener(t, n, !1) : e.attachEvent ? e.attachEvent("on" + t, n) : (e = e._handlers || (e._handlers = {}))[t] = (e[t] || Be).concat(n) }; function Ge(e, t) { return e._handlers && e._handlers[t] || Be } function T(e, t, n) { var r; e.removeEventListener ? e.removeEventListener(t, n, !1) : e.detachEvent ? e.detachEvent("on" + t, n) : (r = (e = e._handlers) && e[t]) && -1 < (n = L(r, n)) && (e[t] = r.slice(0, n).concat(r.slice(n + 1))) } function O(e, t) { var n = Ge(e, t); if (n.length) for (var r = Array.prototype.slice.call(arguments, 2), i = 0; i < n.length; ++i)n[i].apply(null, r) } function A(e, t, n) { return "string" == typeof t && (t = { type: t, preventDefault: function () { this.defaultPrevented = !0 } }), O(e, n || t.type, e, t), Xe(t) || t.codemirrorIgnore } function Ue(e) { var t = e._handlers && e._handlers.cursorActivity; if (t) for (var n = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), r = 0; r < t.length; ++r)-1 == L(n, t[r]) && n.push(t[r]) } function Ve(e, t) { return 0 < Ge(e, t).length } function Ke(e) { e.prototype.on = function (e, t) { k(this, e, t) }, e.prototype.off = function (e, t) { T(this, e, t) } } function D(e) { e.preventDefault ? e.preventDefault() : e.returnValue = !1 } function je(e) { e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0 } function Xe(e) { return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue } function Ye(e) { D(e), je(e) } function $e(e) { return e.target || e.srcElement } function _e(e) { var t = e.which; return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), t = C && e.ctrlKey && 1 == t ? 3 : t } var qe, Ze, Qe = function () { if (w && v < 9) return !1; var e = M("div"); return "draggable" in e || "dragDrop" in e }(); var Je = 3 != "\n\nb".split(/\n/).length ? function (e) { for (var t = 0, n = [], r = e.length; t <= r;) { var i = e.indexOf("\n", t), o = (-1 == i && (i = e.length), e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i)), l = o.indexOf("\r"); -1 != l ? (n.push(o.slice(0, l)), t += l + 1) : (n.push(o), t = i + 1) } return n } : function (e) { return e.split(/\r\n?|\n/) }, et = window.getSelection ? function (e) { try { return e.selectionStart != e.selectionEnd } catch (e) { return !1 } } : function (e) { var t; try { t = e.ownerDocument.selection.createRange() } catch (e) { } return !(!t || t.parentElement() != e) && 0 != t.compareEndPoints("StartToEnd", t) }, tt = "oncopy" in (l = M("div")) || (l.setAttribute("oncopy", "return;"), "function" == typeof l.oncopy), nt = null; var rt = {}, it = {}; function ot(e) { if ("string" == typeof e && it.hasOwnProperty(e)) e = it[e]; else if (e && "string" == typeof e.name && it.hasOwnProperty(e.name)) { var t = it[e.name]; (e = xe(t = "string" == typeof t ? { name: t } : t, e)).name = t.name } else { if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return ot("application/xml"); if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+json$/.test(e)) return ot("application/json") } return "string" == typeof e ? { name: e } : e || { name: "null" } } function lt(e, t) { t = ot(t); var n = rt[t.name]; if (!n) return lt(e, "text/plain"); var r = n(e, t); if (st.hasOwnProperty(t.name)) { var i, o = st[t.name]; for (i in o) o.hasOwnProperty(i) && (r.hasOwnProperty(i) && (r["_" + i] = r[i]), r[i] = o[i]) } if (r.name = t.name, t.helperType && (r.helperType = t.helperType), t.modeProps) for (var l in t.modeProps) r[l] = t.modeProps[l]; return r } var st = {}; function at(e, t) { ue(t, st.hasOwnProperty(e) ? st[e] : st[e] = {}) } function ut(e, t) { if (!0 === t) return t; if (e.copyState) return e.copyState(t); var n, r = {}; for (n in t) { var i = t[n]; i instanceof Array && (i = i.concat([])), r[n] = i } return r } function ct(e, t) { for (var n; e.innerMode && (n = e.innerMode(t)) && n.mode != e;)t = n.state, e = n.mode; return n || { mode: e, state: t } } function ht(e, t, n) { return !e.startState || e.startState(t, n) } var g = function (e, t, n) { this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0, this.lineOracle = n }; function W(e, t) { if ((t -= e.first) < 0 || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document."); for (var n = e; !n.lines;)for (var r = 0; ; ++r) { var i = n.children[r], o = i.chunkSize(); if (t < o) { n = i; break } t -= o } return n.lines[t] } function dt(e, t, n) { var r = [], i = t.line; return e.iter(t.line, n.line + 1, function (e) { e = e.text; i == n.line && (e = e.slice(0, n.ch)), i == t.line && (e = e.slice(t.ch)), r.push(e), ++i }), r } function ft(e, t, n) { var r = []; return e.iter(t, n, function (e) { r.push(e.text) }), r } function pt(e, t) { var n = t - e.height; if (n) for (var r = e; r; r = r.parent)r.height += n } function H(e) { if (null == e.parent) return null; for (var t = e.parent, n = L(t.lines, e), r = t.parent; r; r = (t = r).parent)for (var i = 0; r.children[i] != t; ++i)n += r.children[i].chunkSize(); return n + t.first } function gt(e, t) { var n = e.first; e: do { for (var r = 0; r < e.children.length; ++r) { var i = e.children[r], o = i.height; if (t < o) { e = i; continue e } t -= o, n += i.chunkSize() } return n } while (!e.lines); for (var l = 0; l < e.lines.length; ++l) { var s = e.lines[l].height; if (t < s) break; t -= s } return n + l } function mt(e, t) { return t >= e.first && t < e.first + e.size } function vt(e, t) { return String(e.lineNumberFormatter(t + e.firstLineNumber)) } function F(e, t, n) { if (void 0 === n && (n = null), !(this instanceof F)) return new F(e, t, n); this.line = e, this.ch = t, this.sticky = n } function E(e, t) { return e.line - t.line || e.ch - t.ch } function yt(e, t) { return e.sticky == t.sticky && 0 == E(e, t) } function bt(e) { return F(e.line, e.ch) } function wt(e, t) { return E(e, t) < 0 ? t : e } function xt(e, t) { return E(e, t) < 0 ? e : t } function Ct(e, t) { return Math.max(e.first, Math.min(t, e.first + e.size - 1)) } function P(e, t) { if (t.line < e.first) return F(e.first, 0); var n = e.first + e.size - 1; return t.line > n ? F(n, W(e, n).text.length) : (e = W(e, (n = t).line).text.length, null == (t = n.ch) || e < t ? F(n.line, e) : t < 0 ? F(n.line, 0) : n) } function St(e, t) { for (var n = [], r = 0; r < t.length; r++)n[r] = P(e, t[r]); return n } g.prototype.eol = function () { return this.pos >= this.string.length }, g.prototype.sol = function () { return this.pos == this.lineStart }, g.prototype.peek = function () { return this.string.charAt(this.pos) || void 0 }, g.prototype.next = function () { if (this.pos < this.string.length) return this.string.charAt(this.pos++) }, g.prototype.eat = function (e) { var t = this.string.charAt(this.pos), e = "string" == typeof e ? t == e : t && (e.test ? e.test(t) : e(t)); if (e) return ++this.pos, t }, g.prototype.eatWhile = function (e) { for (var t = this.pos; this.eat(e);); return this.pos > t }, g.prototype.eatSpace = function () { for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos; return this.pos > e }, g.prototype.skipToEnd = function () { this.pos = this.string.length }, g.prototype.skipTo = function (e) { e = this.string.indexOf(e, this.pos); if (-1 < e) return this.pos = e, !0 }, g.prototype.backUp = function (e) { this.pos -= e }, g.prototype.column = function () { return this.lastColumnPos < this.start && (this.lastColumnValue = S(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? S(this.string, this.lineStart, this.tabSize) : 0) }, g.prototype.indentation = function () { return S(this.string, null, this.tabSize) - (this.lineStart ? S(this.string, this.lineStart, this.tabSize) : 0) }, g.prototype.match = function (e, t, n) { var r; if ("string" != typeof e) return (r = this.string.slice(this.pos).match(e)) && 0 < r.index ? null : (r && !1 !== t && (this.pos += r[0].length), r); function i(e) { return n ? e.toLowerCase() : e } return i(this.string.substr(this.pos, e.length)) == i(e) ? (!1 !== t && (this.pos += e.length), !0) : void 0 }, g.prototype.current = function () { return this.string.slice(this.start, this.pos) }, g.prototype.hideFirstChars = function (e, t) { this.lineStart += e; try { return t() } finally { this.lineStart -= e } }, g.prototype.lookAhead = function (e) { var t = this.lineOracle; return t && t.lookAhead(e) }, g.prototype.baseToken = function () { var e = this.lineOracle; return e && e.baseToken(this.pos) }; function Lt(e, t) { this.state = e, this.lookAhead = t } var kt = function (e, t, n, r) { this.state = t, this.doc = e, this.line = n, this.maxLookAhead = r || 0, this.baseTokens = null, this.baseTokenPos = 1 }; function Tt(t, n, r, e) { for (var a = [t.state.modeGen], i = {}, u = (Et(t, n.text, t.doc.mode, r, function (e, t) { a.push(e, t) }, i, e), r.state), o = 0; o < t.state.overlays.length; ++o)!function (e) { r.baseTokens = a; var o = t.state.overlays[e], l = 1, s = 0; r.state = !0, Et(t, n.text, o.mode, r, function (e, t) { for (var n = l; s < e;) { var r = a[l]; e < r && a.splice(l, 1, e, a[l + 1], r), l += 2, s = Math.min(e, r) } if (t) if (o.opaque) a.splice(n, l - n, e, "overlay " + t), l = n + 2; else for (; n < l; n += 2) { var i = a[n + 1]; a[n + 1] = (i ? i + " " : "") + "overlay " + t } }, i), r.state = u, r.baseTokens = null, r.baseTokenPos = 1 }(o); return { styles: a, classes: i.bgClass || i.textClass ? i : null } } function Mt(e, t, n) { var r, i, o; return t.styles && t.styles[0] == e.state.modeGen || (r = Nt(e, H(t)), i = t.text.length > e.options.maxHighlightLength && ut(e.doc.mode, r.state), o = Tt(e, t, r), i && (r.state = i), t.stateAfter = r.save(!i), t.styles = o.styles, o.classes ? t.styleClasses = o.classes : t.styleClasses && (t.styleClasses = null), n === e.doc.highlightFrontier && (e.doc.modeFrontier = Math.max(e.doc.modeFrontier, ++e.doc.highlightFrontier))), t.styles } function Nt(n, r, e) { var t = n.doc, i = n.display; if (!t.mode.startState) return new kt(t, !0, r); var o = function (e, t, n) { for (var r, i, o = e.doc, l = n ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), s = t; l < s; --s) { if (s <= o.first) return o.first; var a = W(o, s - 1), u = a.stateAfter; if (u && (!n || s + (u instanceof Lt ? u.lookAhead : 0) <= o.modeFrontier)) return s; u = S(a.text, null, e.options.tabSize); (null == i || u < r) && (i = s - 1, r = u) } return i }(n, r, e), l = o > t.first && W(t, o - 1).stateAfter, s = l ? kt.fromSaved(t, l, o) : new kt(t, ht(t.mode), o); return t.iter(o, r, function (e) { Ot(n, e.text, s); var t = s.line; e.stateAfter = t == r - 1 || t % 5 == 0 || t >= i.viewFrom && t < i.viewTo ? s.save() : null, s.nextLine() }), e && (t.modeFrontier = s.line), s } function Ot(e, t, n, r) { var i = e.doc.mode, o = new g(t, e.options.tabSize, n); for (o.start = o.pos = r || 0, "" == t && At(i, n.state); !o.eol();)Dt(i, o, n.state), o.start = o.pos } function At(e, t) { if (e.blankLine) return e.blankLine(t); if (e.innerMode) return e = ct(e, t), e.mode.blankLine ? e.mode.blankLine(e.state) : void 0 } function Dt(e, t, n, r) { for (var i = 0; i < 10; i++) { r && (r[0] = ct(e, n).mode); var o = e.token(t, n); if (t.pos > t.start) return o } throw new Error("Mode " + e.name + " failed to advance stream.") } kt.prototype.lookAhead = function (e) { var t = this.doc.getLine(this.line + e); return null != t && e > this.maxLookAhead && (this.maxLookAhead = e), t }, kt.prototype.baseToken = function (e) { if (!this.baseTokens) return null; for (; this.baseTokens[this.baseTokenPos] <= e;)this.baseTokenPos += 2; var t = this.baseTokens[this.baseTokenPos + 1]; return { type: t && t.replace(/( |^)overlay .*/, ""), size: this.baseTokens[this.baseTokenPos] - e } }, kt.prototype.nextLine = function () { this.line++, 0 < this.maxLookAhead && this.maxLookAhead-- }, kt.fromSaved = function (e, t, n) { return t instanceof Lt ? new kt(e, ut(e.mode, t.state), n, t.lookAhead) : new kt(e, ut(e.mode, t), n) }, kt.prototype.save = function (e) { e = !1 !== e ? ut(this.doc.mode, this.state) : this.state; return 0 < this.maxLookAhead ? new Lt(e, this.maxLookAhead) : e }; var Wt = function (e, t, n) { this.start = e.start, this.end = e.pos, this.string = e.current(), this.type = t || null, this.state = n }; function Ht(e, t, n, r) { var i, o, l = e.doc, s = l.mode, a = W(l, (t = P(l, t)).line), u = Nt(e, t.line, n), c = new g(a.text, e.options.tabSize, u); for (r && (o = []); (r || c.pos < t.ch) && !c.eol();)c.start = c.pos, i = Dt(s, c, u.state), r && o.push(new Wt(c, i, ut(l.mode, u.state))); return r ? o : new Wt(c, i, u.state) } function Ft(e, t) { if (e) for (; ;) { var n = e.match(/(?:^|\s+)line-(background-)?(\S+)/); if (!n) break; e = e.slice(0, n.index) + e.slice(n.index + n[0].length); var r = n[1] ? "bgClass" : "textClass"; null == t[r] ? t[r] = n[2] : new RegExp("(?:^|\\s)" + n[2] + "(?:$|\\s)").test(t[r]) || (t[r] += " " + n[2]) } return e } function Et(e, t, n, r, i, o, l) { var s = n.flattenSpans, a = (null == s && (s = e.options.flattenSpans), 0), u = null, c = new g(t, e.options.tabSize, r), h = e.options.addModeClass && [null]; for ("" == t && Ft(At(n, r.state), o); !c.eol();) { var d, f = c.pos > e.options.maxHighlightLength ? (s = !1, l && Ot(e, t, r, c.pos), c.pos = t.length, null) : Ft(Dt(n, c, r.state, h), o); if (!h || (d = h[0].name) && (f = "m-" + (f ? d + " " + f : d)), !s || u != f) { for (; a < c.start;)i(a = Math.min(c.start, a + 5e3), u); u = f } c.start = c.pos } for (; a < c.pos;) { var p = Math.min(c.pos, a + 5e3); i(p, u), a = p } } var Pt = !1, It = !1; function zt(e, t, n) { this.marker = e, this.from = t, this.to = n } function Rt(e, t) { if (e) for (var n = 0; n < e.length; ++n) { var r = e[n]; if (r.marker == t) return r } } function Bt(e, t) { if (t.full) return null; var n = mt(e, t.from.line) && W(e, t.from.line).markedSpans, e = mt(e, t.to.line) && W(e, t.to.line).markedSpans; if (!n && !e) return null; var r = t.from.ch, i = t.to.ch, o = 0 == E(t.from, t.to), l = function (e, t, n) { var r; if (e) for (var i = 0; i < e.length; ++i) { var o, l = e[i], s = l.marker; !(null == l.from || (s.inclusiveLeft ? l.from <= t : l.from < t)) && (l.from != t || "bookmark" != s.type || n && l.marker.insertLeft) || (o = null == l.to || (s.inclusiveRight ? l.to >= t : l.to > t), (r = r || []).push(new zt(s, l.from, o ? null : l.to))) } return r }(n, r, o), s = function (e, t, n) { var r; if (e) for (var i = 0; i < e.length; ++i) { var o, l = e[i], s = l.marker; !(null == l.to || (s.inclusiveRight ? l.to >= t : l.to > t)) && (l.from != t || "bookmark" != s.type || n && !l.marker.insertLeft) || (o = null == l.from || (s.inclusiveLeft ? l.from <= t : l.from < t), (r = r || []).push(new zt(s, o ? null : l.from - t, null == l.to ? null : l.to - t))) } return r }(e, i, o), a = 1 == t.text.length, u = z(t.text).length + (a ? r : 0); if (l) for (var c = 0; c < l.length; ++c) { var h, d = l[c]; null == d.to && ((h = Rt(s, d.marker)) ? a && (d.to = null == h.to ? null : h.to + u) : d.to = r) } if (s) for (var f = 0; f < s.length; ++f) { var p = s[f]; null != p.to && (p.to += u), null == p.from ? Rt(l, p.marker) || (p.from = u, a && (l = l || []).push(p)) : (p.from += u, a && (l = l || []).push(p)) } l = l && Gt(l), s && s != l && (s = Gt(s)); var g = [l]; if (!a) { var m, v = t.text.length - 2; if (0 < v && l) for (var y = 0; y < l.length; ++y)null == l[y].to && (m = m || []).push(new zt(l[y].marker, null, null)); for (var b = 0; b < v; ++b)g.push(m); g.push(s) } return g } function Gt(e) { for (var t = 0; t < e.length; ++t) { var n = e[t]; null != n.from && n.from == n.to && !1 !== n.marker.clearWhenEmpty && e.splice(t--, 1) } return e.length ? e : null } function Ut(e) { var t = e.markedSpans; if (t) { for (var n = 0; n < t.length; ++n)t[n].marker.detachLine(e); e.markedSpans = null } } function Vt(e, t) { if (t) { for (var n = 0; n < t.length; ++n)t[n].marker.attachLine(e); e.markedSpans = t } } function Kt(e) { return e.inclusiveLeft ? -1 : 0 } function jt(e) { return e.inclusiveRight ? 1 : 0 } function Xt(e, t) { var n = e.lines.length - t.lines.length; if (0 != n) return n; var n = e.find(), r = t.find(), i = E(n.from, r.from